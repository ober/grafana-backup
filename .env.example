#!/bin/bash
# Example script to run Grafana backup
# Copy this file to .env and fill in your actual values

# Grafana Configuration
export GRAFANA_URL="https://your-grafana-instance.com"
export GRAFANA_API_KEY="glsa_your_api_key_here"

# AWS S3 Configuration
export S3_BUCKET="your-s3-bucket-name"
export S3_REGION="us-east-1"

# AWS Authentication - Choose one of the following options:

# Option 1: Use explicit AWS credentials (environment variables)
export AWS_ACCESS_KEY_ID="your_aws_access_key_id"
export AWS_SECRET_ACCESS_KEY="your_aws_secret_access_key"

# Option 2: Use AWS credentials file (~/.aws/credentials)
# Comment out the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY above
# and optionally set the profile name:
# export AWS_PROFILE="default"

# Option 3: Use IAM instance role (when running on EC2)
# Comment out the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY above
# No additional configuration needed - credentials are automatically
# retrieved from the EC2 instance metadata service

# Optional: Backup prefix (default: grafana-backups)
export BACKUP_PREFIX="grafana-backups"

# Run the backup
./bin/grafana-backup
